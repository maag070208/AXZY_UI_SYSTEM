import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{c as p}from"./clsx-B-dksMZM.js";import{r as g,R as fe}from"./iframe-B9rAFiN_.js";import{G as ye,q as be,n as xe,F as he,r as ve}from"./index-hWgMQIRJ.js";import{I as je}from"./input-wneKBxxc.js";import{I as ke}from"./pagination-DT7X-Np3.js";import{I as Ne}from"./select-DUoXlhU8.js";import{I as Te}from"./badget-CCCmPiT5.js";import{I as Se}from"./button-CjKvNsZ3.js";import"./preload-helper-C1FmrZbK.js";import"./theme-Cu8onXxY.js";const we={default:"",striped:"divide-y divide-gray-200",bordered:"border border-gray-200"},Ce={sm:"text-xs",md:"text-sm",lg:"text-lg"};function Pe(s){return ye({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3z"},child:[]}]})(s)}const x=(s,c)=>c.split(".").reduce((o,y)=>o&&o[y],s),Ie=s=>s.toLocaleString("es-MX",{style:"currency",currency:"MXN"});function O({columns:s,data:c,containerClassName:o,className:y,variant:w="default",size:C="md",itemsPerPageOptions:P=[5,10,20],defaultItemsPerPage:oe=10,title:L}){const[I,D]=g.useState(1),[b,ie]=g.useState(oe),[u,ce]=g.useState({}),[l,de]=g.useState(null),V=fe.useMemo(()=>l?[...c].sort((e,t)=>{var B,R;const r=x(e,l.key),n=x(t,l.key);if(r==null||n==null)return 0;let i=0;const d=s.find(m=>m.key===l.key);if(!d||!d.sortable)return 0;switch(d.type){case"number":i=r-n;break;case"date":i=new Date(r).getTime()-new Date(n).getTime();break;case"boolean":i=r===n?0:r?1:-1;break;case"catalog":{const m=(B=d.catalogOptions)==null?void 0:B.data.find(M=>M.id===r),F=(R=d.catalogOptions)==null?void 0:R.data.find(M=>M.id===n);i=String((m==null?void 0:m.name)||r).localeCompare(String((F==null?void 0:F.name)||n));break}case"string":default:i=r.localeCompare(n);break}return l.direction==="asc"?i:-i}):c,[c,l,s]).filter(e=>s.every(t=>{if(!t.filter||u[t.key]===void 0||u[t.key]==="")return!0;const r=x(e,t.key),n=String(u[t.key]).toLowerCase();switch(t.type){case"number":return String(r).includes(n);case"boolean":return r===u[t.key];case"catalog":{if(!t.catalogOptions)return!0;const i=t.catalogOptions.data.find(d=>String(d.id).toLowerCase().includes(n)||d.name.toLowerCase().includes(n));return i?r===i.id:!1}case"string":default:return String(r).toLowerCase().includes(n)}})),$=Math.ceil(V.length/b),q=V.slice((I-1)*b,I*b),ue=e=>{e>=1&&e<=$&&D(e)},me=e=>{ie(e),D(1)},A=(e,t)=>{ce(r=>{if(t==null||t===""){const n={...r};return delete n[e],n}return{...r,[e]:t}}),D(1)},pe=e=>{const t=s.find(n=>n.key===e);if(!t||!t.sortable)return;let r="asc";(l==null?void 0:l.key)===e&&l.direction==="asc"&&(r="desc"),de({key:e,direction:r})},ge=e=>{if(!e.filter)return null;if(e.type==="boolean"){const t=u[e.key],r=t===void 0?!0:t===!0?!1:void 0,n=()=>t===void 0?"Mostrar todos":t===!0?"Filtrar solo verdaderos":"Filtrar solo falsos";return a.jsx("button",{className:"flex items-center justify-center cursor-pointer focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 rounded-full p-1 transition-all duration-200",onClick:()=>A(e.key,r),"aria-label":`${n()} para ${e.label}`,title:`${n()} para ${e.label}`,children:a.jsx("div",{className:"relative w-10 h-5 bg-gray-300 rounded-full",children:a.jsx("div",{className:p("absolute top-0.5 w-4 h-4 rounded-full transition-all duration-300 shadow-sm",{"left-0.5 bg-gray-400":t===void 0,"left-5 bg-slate-500":t===!0,"left-0.5 bg-gray-500":t===!1})})})})}return e.filter==="catalog"&&e.catalogOptions?e.catalogOptions.loading?a.jsx(be,{className:"animate-spin","aria-label":"Cargando opciones",title:"Cargando opciones"}):e.catalogOptions.error?a.jsx("span",{className:"text-red-500 text-xs",children:"Error cargando"}):a.jsx(Ne,{name:`filter-${e.key}`,options:[{value:"",label:"Todos"},...e.catalogOptions.data.map(t=>({value:String(t.id),label:t.name}))],value:String(u[e.key]||""),onChange:t=>{const r=t.target.value===""?void 0:t.target.value;A(e.key,r)},onBlur:()=>{},className:"w-full text-xs"}):a.jsx(je,{name:`filter-${e.key}`,className:"w-full text-xs",placeholder:"Buscar...",value:String(u[e.key]||""),onChange:t=>A(e.key,t.target.value),onBlur:()=>{}})},z=(e,t)=>{const r=x(t,e.key);if(e.render)return e.render(t);switch(e.type){case"number":return typeof r=="number"&&e.currencyMX?Ie(r):r;case"boolean":return r?a.jsx(xe,{className:"text-green-500","aria-label":"Verdadero",title:"Verdadero"}):a.jsx(he,{className:"text-red-500","aria-label":"Falso",title:"Falso"});case"actions":return e.actions?e.actions(t):null;case"catalog":if(e.catalogOptions){const n=e.catalogOptions.data.find(i=>i.id===r);return(n==null?void 0:n.name)||r}return r;default:return r}};return a.jsxs("div",{className:p("space-y-4 w-full",o),children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-secondary-200 overflow-hidden",children:[L&&a.jsx("div",{className:"bg-white px-6 py-5 border-b border-secondary-100",children:a.jsx("h2",{className:"text-xl font-bold text-secondary-900 leading-tight",children:L})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:p("min-w-max w-full text-sm text-left text-secondary-600",we[w],Ce[C]),children:[a.jsx("thead",{children:a.jsx("tr",{className:"bg-secondary-50 border-b border-secondary-200 text-xs uppercase tracking-wider font-semibold text-secondary-500",children:s.map(e=>a.jsx("th",{scope:"col",className:p("px-4 py-4 align-top",e.className),children:a.jsxs("div",{className:"flex flex-col gap-3 min-w-[150px]",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-secondary-700 font-bold",children:e.label}),e.sortable&&e.type!=="actions"&&a.jsx("button",{onClick:()=>pe(e.key),className:`p-1 rounded-md transition-colors ${(l==null?void 0:l.key)===e.key?"bg-secondary-200 text-secondary-900":"hover:bg-secondary-200 text-secondary-400 hover:text-secondary-700"}`,title:`Ordenar por ${e.label}`,children:a.jsx(Pe,{className:"w-4 h-4","aria-hidden":"true"})})]}),a.jsx("div",{className:"w-full",children:e.filter?ge(e):null})]})},e.key))})}),a.jsx("tbody",{className:"divide-y divide-secondary-100",children:q.length>0?q.map((e,t)=>a.jsx("tr",{className:"hover:bg-secondary-50/50 transition-colors duration-150 group",children:s.map(r=>a.jsx("td",{className:p("px-4 py-3 align-middle",r.className),children:r.type==="actions"?a.jsx("div",{className:"flex items-center justify-center gap-2",children:z(r,e)}):a.jsx("div",{className:"text-secondary-700 font-medium",children:z(r,e)})},`${t}-${r.key}`))},t)):a.jsx("tr",{children:a.jsx("td",{colSpan:s.length,className:"px-6 py-12 text-center",children:a.jsxs("div",{className:"flex flex-col items-center justify-center text-secondary-400",children:[a.jsx("span",{className:"text-lg",children:"No se encontraron resultados"}),a.jsx("span",{className:"text-sm mt-1",children:"Intenta ajustar los filtros"})]})})})})]})})]}),a.jsx("div",{className:"bg-white rounded-b-xl border-t border-secondary-200 px-6 py-4",children:a.jsx(ke,{currentPage:I,totalPages:$||1,onPageChange:ue,color:"primary",itemsPerPageOptions:P,itemsPerPage:b,onItemsPerPageChange:me,totalItems:V.length})})]})}O.__docgenInfo={description:"",methods:[],displayName:"ITTable",props:{columns:{required:!0,tsType:{name:"Array",elements:[{name:"Column",elements:[{name:"T"}],raw:"Column<T>"}],raw:"Column<T>[]"},description:""},containerClassName:{required:!1,tsType:{name:"string"},description:""},data:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:""},variant:{required:!1,tsType:{name:"TableVariants"},description:"",defaultValue:{value:'"default"',computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"TableSize"},description:"",defaultValue:{value:'"md"',computed:!1}},itemsPerPageOptions:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"Array<number>"},description:"",defaultValue:{value:"[5, 10, 20]",computed:!1}},defaultItemsPerPage:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}},title:{required:!1,tsType:{name:"string"},description:""}}};const _e={title:"Components/Data Display/ITTable",component:O,parameters:{layout:"padded"},tags:["autodocs"],argTypes:{variant:{control:"select",options:["default","striped","bordered"]},size:{control:"select",options:["sm","md","lg"]}}},De=[{id:1,name:"Administrator"},{id:2,name:"Editor"},{id:3,name:"Viewer"}],Ve=s=>Array.from({length:s},(c,o)=>({id:o+1,name:`User ${o+1}`,email:`user${o+1}@example.com`,roleId:o%3+1,balance:Math.random()*1e4,isActive:o%4!==0,lastLogin:new Date(Date.now()-Math.random()*1e10).toISOString()})),f=Ve(25),S=[{key:"id",label:"ID",type:"number"},{key:"name",label:"Name",type:"string"},{key:"email",label:"Email",type:"string"}],le=[{key:"id",label:"ID",type:"number",sortable:!0,filter:!0},{key:"name",label:"Name",type:"string",sortable:!0,filter:!0},{key:"email",label:"Email",type:"string",sortable:!0,filter:!0},{key:"roleId",label:"Role",type:"catalog",sortable:!0,filter:"catalog",catalogOptions:{data:De}},{key:"balance",label:"Balance",type:"number",sortable:!0,currencyMX:!0},{key:"isActive",label:"Status",type:"boolean",sortable:!0,filter:!0,render:s=>a.jsx(Te,{label:s.isActive?"Active":"Inactive",color:s.isActive?"success":"danger"})}],h={args:{columns:S,data:f.slice(0,5),title:"Basic Users Table"}},v={args:{columns:S,data:f,title:"Paginated Table",defaultItemsPerPage:5,itemsPerPageOptions:[5,10,20]}},j={args:{columns:le.map(s=>({...s,render:void 0})),data:f,title:"Data Management (Sort & Filter)"}},k={args:{columns:le,data:f,title:"Custom Rendering (Badges & Catalogs)"}},Ae=s=>{const[c,o]=g.useState(f.slice(0,5)),y={key:"actions",label:"Actions",type:"actions",actions:w=>a.jsx(a.Fragment,{children:a.jsx(Se,{size:"small",variant:"text",color:"danger",ariaLabel:"Delete",onClick:()=>o(C=>C.filter(P=>P.id!==w.id)),children:a.jsx(ve,{})})})};return a.jsx(O,{...s,data:c,columns:[...S,y]})},N={render:s=>a.jsx(Ae,{...s}),args:{title:"Table with Actions"}},T={args:{columns:S,data:[],title:"No Data Available"}};var E,W,X;h.parameters={...h.parameters,docs:{...(E=h.parameters)==null?void 0:E.docs,source:{originalSource:`{
  args: {
    columns: basicColumns,
    data: mockData.slice(0, 5),
    // Just a few
    title: "Basic Users Table"
  }
}`,...(X=(W=h.parameters)==null?void 0:W.docs)==null?void 0:X.source}}};var _,U,G;v.parameters={...v.parameters,docs:{...(_=v.parameters)==null?void 0:_.docs,source:{originalSource:`{
  args: {
    columns: basicColumns,
    data: mockData,
    title: "Paginated Table",
    defaultItemsPerPage: 5,
    itemsPerPageOptions: [5, 10, 20]
  }
}`,...(G=(U=v.parameters)==null?void 0:U.docs)==null?void 0:G.source}}};var H,J,K;j.parameters={...j.parameters,docs:{...(H=j.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    columns: advancedColumns.map(col => ({
      ...col,
      render: undefined
    })),
    // Remove custom render to show raw formatting
    data: mockData,
    title: "Data Management (Sort & Filter)"
  }
}`,...(K=(J=j.parameters)==null?void 0:J.docs)==null?void 0:K.source}}};var Q,Y,Z;k.parameters={...k.parameters,docs:{...(Q=k.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  args: {
    columns: advancedColumns,
    data: mockData,
    title: "Custom Rendering (Badges & Catalogs)"
  }
}`,...(Z=(Y=k.parameters)==null?void 0:Y.docs)==null?void 0:Z.source}}};var ee,ae,te;N.parameters={...N.parameters,docs:{...(ee=N.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  render: args => <ActionsTableWrapper {...args} />,
  args: {
    title: "Table with Actions"
  }
}`,...(te=(ae=N.parameters)==null?void 0:ae.docs)==null?void 0:te.source}}};var re,se,ne;T.parameters={...T.parameters,docs:{...(re=T.parameters)==null?void 0:re.docs,source:{originalSource:`{
  args: {
    columns: basicColumns,
    data: [],
    title: "No Data Available"
  }
}`,...(ne=(se=T.parameters)==null?void 0:se.docs)==null?void 0:ne.source}}};const Ue=["Default","WithPagination","WithSortingAndFiltering","CustomRendering","WithActions","EmptyState"];export{k as CustomRendering,h as Default,T as EmptyState,N as WithActions,v as WithPagination,j as WithSortingAndFiltering,Ue as __namedExportsOrder,_e as default};
