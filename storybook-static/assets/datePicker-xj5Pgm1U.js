import{j as u}from"./jsx-runtime-D_zvdyIk.js";import{c as x}from"./clsx-B-dksMZM.js";import{r,R as W}from"./iframe-B9rAFiN_.js";import{b as Y}from"./index-hWgMQIRJ.js";import{I as G}from"./calendar-D1ybuRXV.js";import{I as J}from"./input-wneKBxxc.js";import{t as v}from"./theme-Cu8onXxY.js";function K({name:i,value:c,onChange:p,onBlur:C,variant:R="primary",size:k="medium",className:L,calendarClassName:N,disabled:w=!1,label:j,touched:H,error:M,required:S,placeholder:V,minDate:$,maxDate:F}){const[I,y]=r.useState(!1),[h,o]=r.useState(""),[P,D]=r.useState(!0),[Q,T]=r.useState(new Date(c)),d=r.useRef(null),[b,B]=r.useState({top:0,left:0}),l=W.useMemo(()=>typeof c=="string"?new Date(c):c,[c]);r.useEffect(()=>{l instanceof Date&&!isNaN(l.getTime())?(o(g(l)),T(l)):o("")},[l]),r.useEffect(()=>{const t=e=>{d.current&&!d.current.contains(e.target)&&y(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const z=()=>{if(d.current){const t=d.current.getBoundingClientRect(),e=300,a=window.innerHeight;let n=t.bottom+4;t.bottom+e>a&&(n=t.top-e-4),B({top:n,left:t.left})}},O=t=>{p({target:{name:i,value:t}}),T(t),o(g(t)),y(!1)},q=()=>{w||(z(),y(!I))},g=t=>t.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"/"),E=t=>{const e=/^(\d{2})\/(\d{2})\/(\d{4})$/,a=t.match(e);if(!a)return!1;const n=parseInt(a[1],10),s=parseInt(a[2],10),m=parseInt(a[3],10),f=new Date(m,s-1,n);return f.getFullYear()===m&&f.getMonth()===s-1&&f.getDate()===n},_=t=>{let e=t.target.value.replace(/\D/g,"");if(e.length>8&&(e=e.slice(0,8)),e.length>4?e=`${e.slice(0,2)}/${e.slice(2,4)}/${e.slice(4)}`:e.length>2&&(e=`${e.slice(0,2)}/${e.slice(2)}`),o(e),e.length===10&&E(e)){const[a,n,s]=e.split("/").map(Number),m=new Date(s,n-1,a);p({target:{name:i,value:m}}),T(m),D(!0)}else D(!1)},A=()=>{if(E(h)){const[t,e,a]=h.split("/").map(Number),n=new Date(a,e-1,t);if(!isNaN(n.getTime()))C({target:{name:i,value:n}});else{const s=new Date;o(g(s)),p({target:{name:i,value:s}})}}else{const t=new Date;o(g(t)),p({target:{name:i,value:t}}),D(!0)}};return u.jsxs("div",{ref:d,className:x("relative w-full",L),children:[u.jsx(J,{name:i,type:"text",label:j,placeholder:V,value:h,onChange:_,onBlur:A,maxLength:10,iconRight:u.jsx("span",{children:u.jsx(Y,{onClick:q,className:"text-slate-900 cursor-pointer"})}),variant:R,size:k,disabled:w,required:S,touched:H,error:P?M:"Fecha inv√°lida",onClick:q}),I&&u.jsx("div",{className:x("fixed z-[9999]",N),style:{top:`${b.top}px`,left:`${b.left}px`,backgroundColor:v.card.backgroundColor,borderColor:v.card.borderColor,borderWidth:"1px",borderStyle:"solid",borderRadius:v.card.borderRadius,boxShadow:v.card.shadow,padding:"0.5rem"},children:u.jsx(G,{value:l,onChange:O,minDate:$,maxDate:F,className:"h-auto border-none shadow-none w-full"})})]})}K.__docgenInfo={description:"",methods:[],displayName:"ITDatePicker",props:{name:{required:!0,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"Date"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:`(
  event:
    | React.ChangeEvent<HTMLInputElement>
    | { target: { name: string; value: Date } }
) => void`,signature:{arguments:[{type:{name:"union",raw:`| React.ChangeEvent<HTMLInputElement>
| { target: { name: string; value: Date } }`,elements:[{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"signature",type:"object",raw:"{ target: { name: string; value: Date } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ name: string; value: Date }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"value",value:{name:"Date",required:!0}}]},required:!0}}]}}]},name:"event"}],return:{name:"void"}}},description:""},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  event:
    | React.FocusEvent<HTMLInputElement>
    | { target: { name: string; value: Date } }
) => void`,signature:{arguments:[{type:{name:"union",raw:`| React.FocusEvent<HTMLInputElement>
| { target: { name: string; value: Date } }`,elements:[{name:"ReactFocusEvent",raw:"React.FocusEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"signature",type:"object",raw:"{ target: { name: string; value: Date } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ name: string; value: Date }",signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"value",value:{name:"Date",required:!0}}]},required:!0}}]}}]},name:"event"}],return:{name:"void"}}},description:""},variant:{required:!1,tsType:{name:"ColorsTypes"},description:"",defaultValue:{value:'"primary"',computed:!1}},size:{required:!1,tsType:{name:"SizesTypes"},description:"",defaultValue:{value:'"medium"',computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},calendarClassName:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},touched:{required:!1,tsType:{name:"boolean"},description:""},error:{required:!1,tsType:{name:"string"},description:""},minDate:{required:!1,tsType:{name:"Date"},description:""},maxDate:{required:!1,tsType:{name:"Date"},description:""}}};export{K as I};
